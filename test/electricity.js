// ====================================================================
// –§–ê–ô–õ –¢–ï–°–¢–ê –ü–û –≠–õ–ï–ö–¢–†–ò–ß–ï–°–¢–í–£ (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
// ====================================================================

window.TEST_CONFIG = {
    title: "–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è: –≠–ª–µ–∫—Ç—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–ª. –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫ (—Ç–µ—Å—Ç)",
    totalQuestions: 3,       // –¢–æ–ª—å–∫–æ 3 —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–∞
    totalProblems: 1,        // –¢–æ–ª—å–∫–æ 1 –∑–∞–¥–∞—á–∞
    maxScore: 6,             // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª (3√ó1 + 1√ó3 = 6)
    
    telegram: {
        botToken: "8344281396:AAGZ9-M2XRyPMHiI2akBSSIN7QAtRGDmLOY",
        chatId: "1189539923",
        parseMode: "Markdown",
        disableNotification: false
    },
    
    gradingScale: {           // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ –æ—Ü–µ–Ω–æ–∫
        5: 6,                // 6 –±–∞–ª–ª–æ–≤ = 5
        4: 5,                // 5 –±–∞–ª–ª–æ–≤ = 4
        3: 3,                // 3-4 –±–∞–ª–ª–∞ = 3
        2: 0                 // 0-2 –±–∞–ª–ª–∞ = 2
    },
    
    anticheat: {
        password: "3265",     // –ü–∞—Ä–æ–ª—å –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞–Ω—Ç–∏—á–∏—Ç–∞
        blockTime: 30         // –£–º–µ–Ω—å—à–µ–Ω–æ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∞ (30 —Å–µ–∫)
    },
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∞
    shuffleQuestions: true,   // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã
    shuffleOptions: true,     // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
    showCorrectAnswer: true   // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏
};

// –ë–ê–ù–ö –¢–ï–û–†–ï–¢–ò–ß–ï–°–ö–ò–• –í–û–ü–†–û–°–û–í (5 –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
window.questionsBank = [
    {
        text: "–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–ª–µ–∫—Ç—Ä–∏–∑–∞—Ü–∏—è?",
        options: [
            {t: "–°–æ–æ–±—â–µ–Ω–∏–µ —Ç–µ–ª—É —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –∑–∞—Ä—è–¥–∞", v: "correct"},
            {t: "–ü–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–ø–ª–∞ –æ—Ç –æ–¥–Ω–æ–≥–æ —Ç–µ–ª–∞ –∫ –¥—Ä—É–≥–æ–º—É", v: "wrong"},
            {t: "–î–≤–∏–∂–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–æ–≤ –≤ –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–µ", v: "wrong"},
            {t: "–°–æ–∑–¥–∞–Ω–∏–µ –º–∞–≥–Ω–∏—Ç–Ω–æ–≥–æ –ø–æ–ª—è", v: "wrong"}
        ],
        points: 1
    },
    {
        text: "–ö–∞–∫–∏–µ –¥–≤–∞ —Ä–æ–¥–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∑–∞—Ä—è–¥–æ–≤ —Å—É—â–µ—Å—Ç–≤—É—é—Ç?",
        options: [
            {t: "–°–µ–≤–µ—Ä–Ω—ã–π –∏ —é–∂–Ω—ã–π", v: "wrong"},
            {t: "–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π", v: "correct"},
            {t: "–¢–µ–ø–ª–æ–≤–æ–π –∏ —Ö–æ–ª–æ–¥–Ω—ã–π", v: "wrong"},
            {t: "–°–∏–ª—å–Ω—ã–π –∏ —Å–ª–∞–±—ã–π", v: "wrong"}
        ],
        points: 1
    },
    {
        text: "–ö–∞–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Ç–µ–ª–∞ —Å –æ–¥–Ω–æ–∏–º–µ–Ω–Ω—ã–º–∏ –∑–∞—Ä—è–¥–∞–º–∏?",
        options: [
            {t: "–ü—Ä–∏—Ç—è–≥–∏–≤–∞—é—Ç—Å—è", v: "wrong"},
            {t: "–û—Ç—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è", v: "correct"},
            {t: "–ù–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç", v: "wrong"},
            {t: "–°–Ω–∞—á–∞–ª–∞ –ø—Ä–∏—Ç—è–≥–∏–≤–∞—é—Ç—Å—è, –∑–∞—Ç–µ–º –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—é—Ç—Å—è", v: "wrong"}
        ],
        points: 1
    },
    {
        text: "–ß—Ç–æ —Ç–∞–∫–æ–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫?",
        options: [
            {t: "–°–∫–æ–ø–ª–µ–Ω–∏–µ –Ω–µ–ø–æ–¥–≤–∏–∂–Ω—ã—Ö –∑–∞—Ä—è–¥–æ–≤", v: "wrong"},
            {t: "–£–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∑–∞—Ä—è–∂–µ–Ω–Ω—ã—Ö —á–∞—Å—Ç–∏—Ü", v: "correct"},
            {t: "–°–∏–ª–∞ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è –º–µ–∂–¥—É –∑–∞—Ä—è–¥–∞–º–∏", v: "wrong"},
            {t: "–≠–Ω–µ—Ä–≥–∏—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—è", v: "wrong"}
        ],
        points: 1
    },
    {
        text: "–ö–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –µ–¥–∏–Ω–∏—Ü–∞ —Å–∏–ª—ã —Ç–æ–∫–∞?",
        options: [
            {t: "–í–æ–ª—å—Ç", v: "wrong"},
            {t: "–ê–º–ø–µ—Ä", v: "correct"},
            {t: "–û–º", v: "wrong"},
            {t: "–ö—É–ª–æ–Ω", v: "wrong"}
        ],
        points: 1
    }
];

// –ë–ê–ù–ö –ó–ê–î–ê–ß (2 –∑–∞–¥–∞—á–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
window.problemsBank = [
    {
        text: "–ß–µ—Ä–µ–∑ —Å–ø–∏—Ä–∞–ª—å —ç–ª–µ–∫—Ç—Ä–æ–ø–ª–∏—Ç–∫–∏ –∑–∞ 2 –º–∏–Ω –ø—Ä–æ—à—ë–ª —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –∑–∞—Ä—è–¥ 600 –ö–ª. –ö–∞–∫–æ–≤–∞ —Å–∏–ª–∞ —Ç–æ–∫–∞ –≤ —Å–ø–∏—Ä–∞–ª–∏?",
        options: [
            {t: "300 –ê", v: "wrong"},
            {t: "5 –ê", v: "correct"},
            {t: "1200 –ê", v: "wrong"},
            {t: "0,2 –ê", v: "wrong"},
            {t: "50 –ê", v: "wrong"},
            {t: "10 –ê", v: "wrong"},
            {t: "100 –ê", v: "wrong"},
            {t: "1 –ê", v: "wrong"}
        ],
        points: 3
    },
    {
        text: "–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –ª–∞–º–ø–æ—á–∫–µ –∫–∞—Ä–º–∞–Ω–Ω–æ–≥–æ —Ñ–æ–Ω–∞—Ä–∏–∫–∞ 3,5 –í. –ß–µ–º—É —Ä–∞–≤–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Ç–æ–∫–∞ –∑–∞ 1 –º–∏–Ω—É—Ç—É, –µ—Å–ª–∏ —Å–∏–ª–∞ —Ç–æ–∫–∞ 0,28 –ê?",
        options: [
            {t: "58,8 –î–∂", v: "correct"},
            {t: "0,98 –î–∂", v: "wrong"},
            {t: "12,5 –î–∂", v: "wrong"},
            {t: "100 –î–∂", v: "wrong"},
            {t: "3,5 –î–∂", v: "wrong"},
            {t: "28 –î–∂", v: "wrong"},
            {t: "10 –î–∂", v: "wrong"},
            {t: "1 –î–∂", v: "wrong"}
        ],
        points: 3
    }
];

// ====================================================================
// –§–£–ù–ö–¶–ò–ò –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø
// ====================================================================

/**
 * –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
 */
window.testTelegram = async function() {
    const config = window.TEST_CONFIG.telegram;
    const url = `https://api.telegram.org/bot${config.botToken}/sendMessage`;
    
    console.log('üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –≤ Telegram...');
    console.log('URL:', url);
    console.log('Chat ID:', config.chatId);
    
    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                chat_id: config.chatId,
                text: 'üîß *–¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç)*\n\n‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!\nüìÖ –í—Ä–µ–º—è: ' + new Date().toLocaleString('ru-RU'),
                parse_mode: 'Markdown'
            })
        });
        
        const data = await response.json();
        
        if (data.ok) {
            console.log('‚úÖ Telegram —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!');
            alert('‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!');
            return true;
        } else {
            console.error('‚ùå –û—à–∏–±–∫–∞ Telegram:', data);
            alert('‚ùå –û—à–∏–±–∫–∞ Telegram: ' + (data.description || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'));
            return false;
        }
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏:', error);
        alert('‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
        return false;
    }
};

/**
 * –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Telegram API
 */
window.checkTelegramConnection = async function() {
    const config = window.TEST_CONFIG.telegram;
    const url = `https://api.telegram.org/bot${config.botToken}/getMe`;
    
    try {
        const response = await fetch(url);
        const data = await response.json();
        
        if (data.ok) {
            console.log('‚úÖ –ë–æ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω:', data.result);
            return true;
        } else {
            console.error('‚ùå –ë–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:', data);
            return false;
        }
    } catch (error) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–æ—Ç–∞:', error);
        return false;
    }
};

// ====================================================================
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ü–†–û–í–ï–†–ö–ò
// ====================================================================

console.log('‚úÖ –§–∞–π–ª electricity.js (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π) –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
console.log(`üìä –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤: ${window.questionsBank.length}`);
console.log(`üìä –ó–∞–¥–∞—á: ${window.problemsBank.length}`);
console.log(`üéØ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª: ${window.TEST_CONFIG.maxScore}`);
console.log(`üìö –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞: "${window.TEST_CONFIG.title}"`);
console.log('üéÆ –¢–µ—Å—Ç –∑–∞–π–º–µ—Ç –≤—Å–µ–≥–æ 1-2 –º–∏–Ω—É—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏');

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Telegram –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
    setTimeout(() => {
        console.log('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Telegram...');
        window.checkTelegramConnection().then(isConnected => {
            if (isConnected) {
                console.log('‚úÖ Telegram –ø–æ–¥–∫–ª—é—á–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (—Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
                const testBtn = document.createElement('button');
                testBtn.textContent = 'üîÑ –¢–µ—Å—Ç Telegram';
                testBtn.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: #0088cc;
                    color: white;
                    border: none;
                    padding: 10px 15px;
                    border-radius: 5px;
                    cursor: pointer;
                    z-index: 9999;
                    font-size: 14px;
                    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
                `;
                testBtn.onclick = window.testTelegram;
                testBtn.title = '–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ Telegram';
                document.body.appendChild(testBtn);
                
                console.log('üëÜ –ö–Ω–æ–ø–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ø—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª');
            } else {
                console.warn('‚ö†Ô∏è Telegram –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –∏ chat_id.');
                console.warn('‚ö†Ô∏è –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ Telegram');
            }
        });
    }, 1000);
}

// –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
window.electricityTestConfig = window.TEST_CONFIG;
window.electricityQuestions = window.questionsBank;
window.electricityProblems = window.problemsBank;

console.log('üöÄ –°–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç "electricity" –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!');
console.log('üëâ –í—Å–µ–≥–æ 4 –≤–æ–ø—Ä–æ—Å–∞ (3 –ø—Ä–æ—Å—Ç—ã—Ö + 1 –∑–∞–¥–∞—á–∞) –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.');
console.log('üîë –ü–∞—Ä–æ–ª—å –∞–Ω—Ç–∏—á–∏—Ç–∞: 3265');